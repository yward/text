{"version":3,"sources":["webpack:///src/components/SessionList.vue","webpack:///./src/components/SessionList.vue?87e2","webpack:///./src/components/SessionList.vue?bd1d","webpack:///./src/components/SessionList.vue?35b4","webpack:///./src/components/SessionList.vue","webpack:///./src/components/SessionList.vue?551b","webpack:///./src/components/SessionList.vue?a49f","webpack:///./src/components/SessionList.vue?bf31"],"names":[],"mappings":"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","file":"editor-collab.js?v=ac26dc7ffbecb9167ac7","sourcesContent":["<!--\n  - @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n  -\n  - @author Julius Härtl <jus@bitgrid.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div class=\"session-list\">\n\t\t<div v-tooltip.bottom=\"editorsTooltip\" class=\"avatar-list\" @click=\"popoverVisible=!popoverVisible\">\n\t\t\t<div v-if=\"sessionsPopover.length > 0\" class=\"avatardiv icon-more\" />\n\t\t\t<Avatar v-for=\"session in sessionsVisible\"\n\t\t\t\t:key=\"session.id\"\n\t\t\t\t:user=\"session.userId ? session.userId : session.guestName\"\n\t\t\t\t:is-guest=\"session.userId === null\"\n\t\t\t\t:disable-tooltip=\"true\"\n\t\t\t\t:style=\"sessionStyle(session)\"\n\t\t\t\t:size=\"32\" />\n\t\t</div>\n\t\t<div v-show=\"popoverVisible\" class=\"popovermenu menu-right\">\n\t\t\t<PopoverMenu :menu=\"sessionsPopover\" />\n\t\t\t<slot />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport Avatar from '@nextcloud/vue/dist/Components/Avatar'\nimport PopoverMenu from '@nextcloud/vue/dist/Components/PopoverMenu'\nimport Tooltip from '@nextcloud/vue/dist/Directives/Tooltip'\n\nconst COLLABORATOR_IDLE_TIME = 10\nconst COLLABORATOR_DISCONNECT_TIME = 30\n\nexport default {\n\tname: 'SessionList',\n\tcomponents: {\n\t\tAvatar,\n\t\tPopoverMenu,\n\t},\n\tdirectives: {\n\t\ttooltip: Tooltip,\n\t},\n\tprops: {\n\t\tsessions: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => { return {} },\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpopoverVisible: '',\n\t\t\tmyName: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\teditorsTooltip() {\n\t\t\tif (this.sessionsPopover.length > 0) {\n\t\t\t\tconst first = this.activeSessions.slice(0, 3).map((session) => session.guestName ? session.guestName : session.displayName).join(', ')\n\t\t\t\tconst others = this.activeSessions.slice(3).length\n\t\t\t\treturn first + ' ' + n('text', 'and %n other editor', 'and %n other editors', others)\n\t\t\t}\n\t\t\treturn this.activeSessions.slice(0, 3).map((session) => session.guestName ? session.guestName : session.displayName).join(', ')\n\t\t},\n\t\tavatarUrl() {\n\t\t\treturn (session) => {\n\t\t\t\tconst user = !session.guestName ? session.userId : session.guestName\n\t\t\t\tconst size = 32\n\t\t\t\tconst guest = !!session.guestName\n\t\t\t\tconst avatarUrl = OC.generateUrl(\n\t\t\t\t\tguest ? '/avatar/guest/{user}/{size}' : '/avatar/{user}/{size}',\n\t\t\t\t\t{\n\t\t\t\t\t\tuser: user,\n\t\t\t\t\t\tsize: size,\n\t\t\t\t\t})\n\t\t\t\treturn window.location.protocol + '//' + window.location.host + avatarUrl\n\t\t\t}\n\t\t},\n\t\tactiveSessions() {\n\t\t\treturn Object.values(this.sessions).filter((session) =>\n\t\t\t\tsession.lastContact > Date.now() / 1000 - COLLABORATOR_DISCONNECT_TIME && !session.isCurrent\n\t\t\t\t\t&& (session.userId !== null || session.guestName !== null)\n\t\t\t)\n\t\t},\n\t\tcurrentSession() {\n\t\t\treturn Object.values(this.sessions).find((session) => session.isCurrent)\n\t\t},\n\t\tsessionStyle() {\n\t\t\treturn (session) => {\n\t\t\t\treturn {\n\t\t\t\t\t'opacity': session.lastContact > Date.now() / 1000 - COLLABORATOR_IDLE_TIME ? 1 : 0.5,\n\t\t\t\t\t// 'border-color': session.color\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsessionsVisible() {\n\t\t\treturn this.activeSessions.slice(0, 3)\n\t\t},\n\t\tsessionsPopover() {\n\t\t\treturn [\n\t\t\t\t...this.activeSessions.slice(3).map((session) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\thref: '#',\n\t\t\t\t\t\ticon: this.avatarUrl(session),\n\t\t\t\t\t\ttext: session.guestName ? session.guestName : session.displayName,\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t]\n\t\t},\n\t},\n\tmethods: {\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n\t.session-list {\n\t\tposition: relative;\n\n\t\t/deep/ .popovermenu {\n\t\t\tmargin-right: -4px;\n\t\t\timg {\n\t\t\t\tpadding: 0;\n\t\t\t\twidth: 32px !important;\n\t\t\t\theight: 32px !important;\n\t\t\t\tmargin: 6px;\n\t\t\t\tborder-radius: 50%;\n\t\t\t}\n\t\t}\n\t}\n\n\t.avatar-list {\n\t\tdisplay: inline-flex;\n\t\tflex-direction: row-reverse;\n\n\t\t.avatardiv,\n\t\t/deep/ .avatardiv {\n\t\t\twidth: 36px;\n\t\t\theight: 36px;\n\t\t\tmargin-right: -8px;\n\t\t\tborder: 2px solid var(--color-main-background);\n\t\t\tbackground-color: var(--color-main-background) !important;\n\t\t\tbox-sizing: content-box !important;\n\t\t\t&.icon-more {\n\t\t\t\twidth: 32px;\n\t\t\t\theight: 32px;\n\t\t\t\topacity: .5;\n\t\t\t\tbackground-color: var(--color-background-dark) !important;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t}\n\t}\n\n\t.popovermenu {\n\t\tdisplay: block;\n\t}\n</style>\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".session-list[data-v-0d166054] {\\n  position: relative;\\n}\\n.session-list[data-v-0d166054] .popovermenu {\\n    margin-right: -4px;\\n}\\n.session-list[data-v-0d166054] .popovermenu img {\\n      padding: 0;\\n      width: 32px !important;\\n      height: 32px !important;\\n      margin: 6px;\\n      border-radius: 50%;\\n}\\n.avatar-list[data-v-0d166054] {\\n  display: inline-flex;\\n  flex-direction: row-reverse;\\n}\\n.avatar-list .avatardiv[data-v-0d166054],\\n  .avatar-list[data-v-0d166054] .avatardiv {\\n    width: 36px;\\n    height: 36px;\\n    margin-right: -8px;\\n    border: 2px solid var(--color-main-background);\\n    background-color: var(--color-main-background) !important;\\n    box-sizing: content-box !important;\\n}\\n.avatar-list .avatardiv.icon-more[data-v-0d166054],\\n    .avatar-list[data-v-0d166054] .avatardiv.icon-more {\\n      width: 32px;\\n      height: 32px;\\n      opacity: .5;\\n      background-color: var(--color-background-dark) !important;\\n      cursor: pointer;\\n}\\n.popovermenu[data-v-0d166054] {\\n  display: block;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"session-list\" }, [\n    _c(\n      \"div\",\n      {\n        directives: [\n          {\n            name: \"tooltip\",\n            rawName: \"v-tooltip.bottom\",\n            value: _vm.editorsTooltip,\n            expression: \"editorsTooltip\",\n            modifiers: { bottom: true }\n          }\n        ],\n        staticClass: \"avatar-list\",\n        on: {\n          click: function($event) {\n            _vm.popoverVisible = !_vm.popoverVisible\n          }\n        }\n      },\n      [\n        _vm.sessionsPopover.length > 0\n          ? _c(\"div\", { staticClass: \"avatardiv icon-more\" })\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm._l(_vm.sessionsVisible, function(session) {\n          return _c(\"Avatar\", {\n            key: session.id,\n            style: _vm.sessionStyle(session),\n            attrs: {\n              user: session.userId ? session.userId : session.guestName,\n              \"is-guest\": session.userId === null,\n              \"disable-tooltip\": true,\n              size: 32\n            }\n          })\n        })\n      ],\n      2\n    ),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      {\n        directives: [\n          {\n            name: \"show\",\n            rawName: \"v-show\",\n            value: _vm.popoverVisible,\n            expression: \"popoverVisible\"\n          }\n        ],\n        staticClass: \"popovermenu menu-right\"\n      },\n      [\n        _c(\"PopoverMenu\", { attrs: { menu: _vm.sessionsPopover } }),\n        _vm._v(\" \"),\n        _vm._t(\"default\")\n      ],\n      2\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionList.vue?vue&type=style&index=0&id=0d166054&scoped=true&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2a335d1e\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionList.vue?vue&type=style&index=0&id=0d166054&scoped=true&lang=scss&\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionList.vue?vue&type=style&index=0&id=0d166054&scoped=true&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","import { render, staticRenderFns } from \"./SessionList.vue?vue&type=template&id=0d166054&scoped=true&\"\nimport script from \"./SessionList.vue?vue&type=script&lang=js&\"\nexport * from \"./SessionList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SessionList.vue?vue&type=style&index=0&id=0d166054&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d166054\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/jus/repos/nextcloud/server/apps-extra/text/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0d166054')) {\n      api.createRecord('0d166054', component.options)\n    } else {\n      api.reload('0d166054', component.options)\n    }\n    module.hot.accept(\"./SessionList.vue?vue&type=template&id=0d166054&scoped=true&\", function () {\n      api.rerender('0d166054', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/SessionList.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionList.vue?vue&type=script&lang=js&\"","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionList.vue?vue&type=style&index=0&id=0d166054&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionList.vue?vue&type=style&index=0&id=0d166054&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SessionList.vue?vue&type=template&id=0d166054&scoped=true&\""],"sourceRoot":""}